from aiogram.contrib.fsm_storage.memory import MemoryStorage
from aiogram.dispatcher.filters.state import StatesGroup, State

from config import TOKEN
import logging
from keyboards import *
from aiogram import Bot, Dispatcher, executor, types
from aiogram.dispatcher.filters import Text
from aiogram.dispatcher import FSMContext

API_TOKEN = 'BOT TOKEN HERE'

logging.basicConfig(level=logging.INFO)

bot = Bot(token=TOKEN)
storage = MemoryStorage()
dp = Dispatcher(bot, storage=storage)
ID = '170481504'


class ProfileStatesGroup(StatesGroup):
    photo = State()
    lesson = State()
    mail = State()


garantee = '1Ô∏è‚É£ –í –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ª—é–¥–∏, –∑–∞–Ω–∏–º–∞—é—â–∏–µ –≤—ã—Å–æ–∫–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –¥–∞–Ω–Ω–æ–π —Å—Ñ–µ—Ä–µ –∏ –æ–Ω–∏ –∏–º–µ—é—Ç —Å–≤–æ–±–æ–¥–Ω—ã–π ' \
           '–¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ –û–ì–≠ –∏ –ï–ì–≠.\n2Ô∏è‚É£ M—ã –øpe–¥oc—Ça–≤–ª—èe–º –≤ap–∏a–Ω—Ç—ã –∏ o—Ç–≤e—Ç—ã –∑a 20 —áaco–≤ –¥o –Ωa—áa–ªa ' \
           '—ç–∫–∑a–ºe–Ωa.\n 3Ô∏è‚É£ –ó–∞ 30 —á–∞—Å–æ–≤ –¥–æ –Ω–∞—á–∞–ª–∞ —ç–∫–∑–∞–º–µ–Ω–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º –≤—Å–µ –ö–ò–ú—ã –Ω–∞ —Ä—É–∫–∏ –∏ –ø—Ä–æ—Ä–µ—à–∏–≤–∞–µ–º –≤—Å–µ ' \
           '–∑–∞–¥–∞–Ω–∏—è.\nÔ∏è4Ô∏è‚É£ –ú—ã –¥–æ—Ä–æ–∂–∏–º —Å–≤–æ–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ —Å—Ç–∞—Ä–∞–µ–º—Å—è –ø–æ–º–æ—á—å —Å–¥–∞—Ç—å —ç–∫–∑–∞–º–µ–Ω.  \n 5Ô∏è‚É£ –û –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ –º–∞–ª–æ ' \
           '–∫—Ç–æ –∑–Ω–∞–µ—Ç, —Ç.–∫. –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∏–∑–±—Ä–∞–Ω–Ω–æ–º—É –∫—Ä—É–≥—É –ª—é–¥–µ–π, –æ–ø–ª–∞—Ç–∏–≤—à–∏–º –Ω–∞—à–∏ —É—Å–ª—É–≥–∏.\n' \
           '6Ô∏è‚É£ –ú—ã –Ω–∏ –≤ –∫–æ–µ–º —Å–ª—É—á–∞–µ –Ω–µ –∫–æ–ø–∏—Ä—É–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –∏–∑ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.\n' \
           '7Ô∏è‚É£ –ú—ã —è–≤–ª—è–µ–º—Å—è –ø–µ—Ä–≤–æ–∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –æ—Ç–≤–µ—Ç–æ–≤.\n8Ô∏è‚É£ –ú—ã –∏–º–µ–µ–º –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–π –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –∑–∞ –ø–ª–µ—á–∞–º–∏.\n9Ô∏è‚É£ –£ –Ω–∞—Å –≤—Å–µ —á–µ—Å—Ç–Ω–æ –∏ –±–µ–∑ –æ–±–º–∞–Ω–∞, –º—ã –Ω–∏ –≤ –∫–æ–µ–º —Å–ª—É—á–∞–µ –Ω–µ —Ö–æ—Ç–∏–º –æ–±–º–∞–Ω—ã–≤–∞—Ç—å –ª—é–¥–µ–π –∫–æ—Ç–æ—Ä—ã–µ –∏ —Ç–∞–∫ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å—Ç—Ä–µ—Å—Å–æ–≤–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–µ—Ä–µ–¥ –≥–æ—Å. —ç–∫–∑–∞–º–µ–Ω–æ–º.\n' \
           'üîü Ha—à –øpoe–∫—Ç –øpe–¥oc—Ça–≤–ª—èe—Ç pea–ª—å–Ω—ãe K–òM—ã –∏ o—Ç–≤e—Ç—ã E–ì–≠/O–ì–≠ 2022 –Ωa oc–Ωo–≤–Ω—É—é –≤o–ª–Ω—É –∏ pe–∑ep–≤–Ω—ãe cpo–∫–∏.'
dop1 = '‚ö†Ô∏è –ö–ò–ú—ã –ø–æ–∫—É–ø–∞–µ–º —É –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ª–∏—Ü –∏–∑ –º–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —É –Ω–∞—Å –µ—Å—Ç—å —Å–≤—è–∑–∏. –ü–æ–∫—É–ø–∞–µ–º –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤. –ö–ò–ú—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–º —É–∂–µ –∑–∞ 30 —á–∞—Å–æ–≤ –¥–æ —ç–∫–∑–∞–º–µ–Ω–∞. –î–∞–ª–µ–µ —Å–∫–∏–¥—ã–≤–∞–µ–º –≤—Å–µ –ö–ò–ú—ã –í–∞–º (–≤ –≤–∏–ø –≥—Ä—É–ø–ø—É). –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —Ä–µ—à–∞–µ—Ç –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è, –∏ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –º—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –í–∞–º —É–∂–µ –≥–æ—Ç–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –í–°–ï –∑–∞–¥–∞–Ω–∏—è.'
dop2 = '‚ö†Ô∏èKo–Ωe—á–Ωo, –Ω–∏ o–¥–Ω–∏ K–òM—ã –Ωe –ºo–≥—É—Ç —á–∏c—Ço —Çeope—Ç–∏—áec–∫–∏ c—Ço–∏—Ç—å –øap—É —Ç—ãc—è—á p—É–±–ªe–π –≤ o—Ñ—Ñ–ªa–π–Ωe, –Ω–æ —Äac–øpe–¥e–ª—è—è –≤c—é ' \
       'c—Ço–∏–ºoc—Ç—å –Ωa o–øpe–¥e–ªe–Ω–Ωoe –∫o–ª–∏—áec—Ç–≤o –øo–ª—å–∑o–≤a—Çe–ªe–π, –º—ã —Éc—Ça–Ωa–≤–ª–∏–≤ae–º –≤–øo–ª–Ωe pa–∑—É–º–Ω—ãe —Üe–Ω—ã.' \
       '–î–∞–∂–µ –µ—Å–ª–∏ –≤—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Å–¥–∞–¥–∏—Ç–µ, —Ç–æ —è –≤–∞—Å —É–≤–µ—Ä—è—é, –±—ã–≤–∞—é—Ç –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–µ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞, –∫–æ–≥–¥–∞ –æ—á–µ–Ω—å –¥–∞–∂–µ ' \
       '—É–º–Ω—ã–µ –∏ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–µ —É—á–µ–Ω–∏–∫–∏ –Ω–µ —Å–¥–∞–≤–∞–ª–∏ –∏–∑-–∑–∞ —Ç–µ—Ö –∏–ª–∏ –∏–Ω—ã—Ö –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤, –ø–æ—ç—Ç–æ–º—É —Å–æ–≤–µ—Ç—É—é –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –ü–ï–†–ï–°–¢–†–ê–•–û–í–ê–¢–¨–°–Ø –∏ –∫—É–ø–∏—Ç—å –æ—Ç–≤–µ—Ç—ã. –ö—Å—Ç–∞—Ç–∏, —ç—Ç–∏ –æ—Ç–≤–µ—Ç—ã —Å—Ç–æ—è—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–¥–æ—Ä–æ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤ –∏–ª–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤).'
dop3 = 'üî∂–õ—é–±—ãe –≤–∑a–∏–ºo–¥e–πc—Ç–≤–∏—è –≤ ce—Ç–∏ "–∏–Ω—Çep–Ωe—Ç" –¥o–ª–∂–Ω—ã –øo–¥–∫pe–ø–ª—è—Ç—åc—è –≥apa–Ω—Ç–∏—è–º–∏, –±—É–¥—å —ç—Ço –øpo–¥a–∂a —Ço–≤apo–≤ –∏–ª–∏ o–∫a–∑a–Ω–∏e —Éc–ª—É–≥. He–≤o–∑–ºo–∂–Ωo –±—ã—Ç—å —É–≤epe–Ω–Ω—ã–º–∏ –≤ —Ço–º, —á—Ço –Ωa –¥p—É–≥o–º –∫o–Ω—Üe c—Çpa–Ω—ã —Ço–≤ap, –∫o—Çop—ã–π B—ã –∑a–∫a–∑a–ª–∏, –¥e–πc—Ç–≤–∏—Çe–ª—å–Ωo c—É—âec—Ç–≤—Ée—Ç. B–≤–∏–¥—É –ªe–≥a–ª—å–Ωo–π –¥e—è—Çe–ª—å–Ωoc—Ç–∏, –øpe–¥oc—Ça–≤–∏—Ç—å –ª—é–±—ãe –≥apa–Ω—Ç–∏–∏ - –Ωe coc—Ça–≤–∏—Ç —Çp—É–¥a, –Ωo –¥a–∂e –≤ —ç—Ço–º c–ª—É—áae –Ωaxo–¥—è—Çc—è –ºo—àe–Ω–Ω–∏–∫–∏, –∫o—Çop—ãe –∏–≥pa—é—Ç –Ωa –¥o–≤ep–∏–∏ c–≤o–∏x –∫–ª–∏e–Ω—Ço–≤. B c—Ñepe —Éc–ª—É–≥ E–ì–≠/O–ì–≠ –≥apa–Ω—Ç–∏–π –Ωe –±—ã–≤ae—Ç,—Ç.–∫. —ç—Ço –Ωe —áe–∫ –Ωa —Ço–≤ap, –∫o—Çop—ã–π B—ã –∫—É–ø–∏–ª–∏ –≤ –ºa–≥a–∑–∏–Ωe —ç–ªe–∫—Çpo–Ω–∏–∫–∏. M—ã –ª–∏—à—å xo—Ç–∏–º Bac –øpe–¥—É–øpe–¥–∏—Ç—å o —Ço–º, —á—Ço –Ωa–π—Ç–∏ o—Ç–≤e—Ç—ã –∏–ª–∏ K–òM—ã –Ωa 2022 –≥o–¥ –±—É–¥e—Ç –Ωe–øpoc—Ço, –∏ –Ω–∏–∫a–∫–∏e –ë–ï–°–ü–õ–ê–¢–ù–´–ï –≥p—É–ø–ø—ã/–øa–±–ª–∏–∫–∏ –≤ co—Ü–∏a–ª—å–Ω—ãx ce—Ç—èx —ç—Ço–≥o c–¥e–ªa—Ç—å –Ωe c–ºo–≥—É—Ç, –∏ —Çe–º –±o–ªee —è–≤–ª—è—Ç—åc—è –øep–≤o–∏c—Ço—á–Ω–∏–∫a–º–∏ –øpe–¥oc—Ça–≤–ªe–Ω–∏—è –∏–Ω—Ñop–ºa—Ü–∏–∏. –î–ª—è —ç—Ç–æ–≥–æ –º—ã —Å–æ–∑–¥–∞–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Ä—è–¥ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –≥—Ä—É–ø–ø, –≥–¥–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑–±—Ä–∞–Ω–Ω–æ–º—É –∫—Ä—É–≥—É –ª–∏—Ü. C—Ço–∏–ºoc—Ç—å –øo–ª—É—áe–Ω–∏—è K–òMo–≤ –∏–∑ o—Ñ—Ñ–ªa–π–Ωa pa–≤–Ω—èe—Çc—è c—É–º–ºa–º c 6 –Ω—É–ª—è–º–∏. B c—Çpa–Ωe, –≥–¥e ec—Ç—å –∫opp—É–ø—Ü–∏—è, —ç—Ço e—âe –≤o–∑–ºo–∂–Ωo c–¥e–ªa—Ç—å, –Ωo –±e–∑ –∑–Ωa—á–∏—Çe–ª—å–Ω—ãx c–≤—è–∑e–π –≤ –º–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–µ –∏ –¥e–Ω–µ–≥ –Ω–∏—áe–≥o –Ωe pe—à–∏—Ç—å. –üo–º–Ω–∏—Çe, —á—Ço –øpoc—Ço —Ça–∫ –Ω–∏–∫—Ço –Ωe c—Ça–Ωe—Ç p–∏c–∫o–≤a—Ç—å c–≤oe–π pe–ø—É—Ça—Ü–∏e–π, –∑ap–ø–ªa—Ço–π, –ºec—Ço–º pa–±o—Ç—ã, —Ç–µ–º –±–æ–ª–µ–µ –∑–∞ –ë–ï–°–ü–õ–ê–¢–ù–û, –ø–æ—ç—Ç–æ–º—É –Ω–µ –≤–µ–¥–∏—Ç–µ—Å—å –Ω–∏ –Ω–∞ –∫–∞–∫–∏–µ-–ª–∏–±–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∏–ª–∏ –¥–µ—à—ë–≤—ã–µ –æ—Ç–≤–µ—Ç—ã, —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ —ç—Ç–æ –û–ë–ú–ê–ù!!!'

oplata = '–¶–ï–ù–ê –î–û–°–¢–£–ü–ê –í –û–î–ù–£ –ì–†–£–ü–ü–£:' \
         'üîπ–ï–ì–≠ - 1199 —Ä—É–±–ª–µ–π.' \
         'üîπ–û–ì–≠ - 899 —Ä—É–±–ª–µ–π.' \
         'üîπ–ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ—á–∏–Ω–µ–Ω–∏–µ - 599 —Ä—É–±–ª–µ–π.' \
         'üîπ–ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ - 499 —Ä—É–±–ª–µ–π.' \
         '‚ö†Ô∏è–ù–∞ –∫–∞–∂–¥—ã–π –ø—Ä–µ–¥–º–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞' \
         '‚ö†Ô∏è–ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ'
otvet = '‚úÖ–î–ª—è –æ–ø–ª–∞—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–µ–Ω–µ–∂–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ –∫–∞—Ä—Ç—É 4276 1700 1457 3372\n' \
        '‚úÖ–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç –æ–ø–ª–∞—Ç—ã –∏ —É–∫–∞–∑–∞—Ç—å –ø–æ—á—Ç—É\n' \
        '‚úÖ–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –∏ –ø–æ—á—Ç—ã –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "/take_answers"'


@dp.message_handler(Text(equals='–ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ'))
async def main_menu(message: types.Message):
    await message.answer('‚¨áÔ∏è–ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ‚¨áÔ∏è', reply_markup=menu_kb)
    await message.delete()


@dp.callback_query_handler()
async def guarantee(callback: types.CallbackQuery):
    if callback.data == 'guarantee':
        await callback.message.answer(garantee, reply_markup=back_menu)
    elif callback.data == 'dop_info':
        await callback.message.answer(dop1)
        await callback.message.answer(dop2)
        await callback.message.answer(dop3, reply_markup=back_menu)
    elif callback.data == 'back':
        await callback.message.answer('‚¨áÔ∏è–ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ‚¨áÔ∏è', reply_markup=menu_kb)
    elif callback.data == 'payment':
        await callback.message.answer("–¶–ï–ù–ê –î–û–°–¢–£–ü–ê –í –û–î–ù–£ –ì–†–£–ü–ü–£:\nüîπ–ï–ì–≠ - 1199 —Ä—É–±–ª–µ–π.\nüîπ–û–ì–≠ - 899 "
                                      "—Ä—É–±–ª–µ–π.\nüîπ–ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ—á–∏–Ω–µ–Ω–∏–µ - 599‚ÇΩ\nüîπ–ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ 499‚ÇΩ\n‚ö†Ô∏è–ù–∞ –∫–∞–∂–¥—ã–π "
                                      "–ø—Ä–µ–¥–º–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞\n‚ö†Ô∏è–ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ",
                                      reply_markup=pay_menu)
    elif callback.data == 'ege':
        await callback.message.answer('–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–π –≤–∞–º –ø—Ä–µ–¥–º–µ—Ç! –ï–ì–≠‚¨áÔ∏è', reply_markup=ege_lessons_ikb)
    elif callback.data == 'oge':
        await callback.message.answer('–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–µ –≤–∞–º –ø—Ä–µ–¥–º–µ—Ç—ã!', reply_markup=ege_lessons_ikb)
    elif callback.data == 'sochen':
        await callback.message.answer(otvet, reply_markup=start_fsm)
    elif callback.data == 'sobes':
        await callback.message.answer(otvet, reply_markup=start_fsm)
    elif callback.data == 'postoplata':
        await callback.message.answer(otvet, reply_markup=start_fsm)


@dp.message_handler(commands=['take_answers'])
async def send_create(message: types.Message):
    await message.answer("–¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤—å –Ω–∞–º —Å–∫—Ä–∏–Ω—à–æ—Ç —á–µ–∫–∞ –æ–± –æ–ø–ª–∞—Ç–µ!")
    await ProfileStatesGroup.photo.set()


@dp.message_handler(lambda message: not message.photo, state=ProfileStatesGroup.photo)
async def check_photo(message: types.Message):
    await message.reply('–≠—Ç–æ –Ω–µ —Å–∫—Ä–∏–Ω—à–æ—Ç!')


@dp.message_handler(content_types='photo', state=ProfileStatesGroup.photo)
async def get_photo(message: types.Message, state: FSMContext):
    async with state.proxy() as data:
        data['photo'] = message.photo[0].file_id
    await message.answer('–¢–µ–ø–µ—Ä—å —É–∫–∞–∂–∏ –ø—Ä–µ–¥–º–µ—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç—ã!\n'
                         '–ï—Å–ª–∏ —Ç—ã –æ–ø–ª–∞—Ç–∏–ª –∏—Ç–æ–≥–æ–≤–æ–µ —Å–æ—á–∏–Ω–µ–Ω–∏–µ –∏–ª–∏ –∏—Ç–æ–≥–æ–≤–æ–µ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ, —Ç–æ —Ç–∞–∫ –∏ –Ω–∞–ø–∏—à–∏!')
    await ProfileStatesGroup.next()


@dp.message_handler(state=ProfileStatesGroup.lesson)
async def get_mail(message: types.Message, state: FSMContext) -> None:
    async with state.proxy() as data:
        data['lesson'] = message.text
    await message.answer('–¢–µ–ø–µ—Ä—å —É–∫–∞–∂–∏ —Å–≤–æ–π email!')
    await ProfileStatesGroup.next()


@dp.message_handler(state=ProfileStatesGroup.mail)
async def get_mail(message: types.Message, state: FSMContext) -> None:
    async with state.proxy() as data:
        data['mail'] = message.text
    await bot.send_photo(ID, photo=data['photo'], caption=data['mail'] + '\n' + data['lesson'])
    await message.answer('–ñ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –ø–æ—á—Ç—É! –°–∫–æ—Ä–æ —Ç–µ–±–µ –æ—Ç–ø—Ä–∞–≤—è—Ç –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã!')
    await state.finish()


@dp.message_handler(commands=['start'])
async def send_start(message: types.Message):
    await message.answer(
        "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∞—Å! –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–Ω–∞–ª–∞–º —Å –æ—Ç–≤–µ—Ç–∞–º–∏. –ü–µ—Ä–µ–¥ –ø–æ–∫—É–ø–∫–æ–π —Å–æ–≤–µ—Ç—É—é –ø–æ–¥—Ä–æ–±–Ω–æ –∏–∑—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é –Ω–∏–∂–µ. –û—Ç–≤–µ—Ç—ã –±—É–¥—É—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —ç–∫–∑–∞–º–µ–Ω–æ–≤.",
        reply_markup=start_kb)
    await message.delete()


@dp.message_handler(commands=['cancel'], state='*')
async def cmd_cancel(message: types.Message, state: FSMContext):
    if state is None:
        return

    await state.finish()
    await message.reply('–í—ã –ø—Ä–µ—Ä–≤–∞–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫—É')


if __name__ == '__main__':
    executor.start_polling(dp, skip_updates=True)
